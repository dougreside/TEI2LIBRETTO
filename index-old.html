
<!DOCTYPE html>

<html lang="en">

  <head>

    <meta charset="utf-8">

    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <meta name="description" content="">

    <meta name="author" content="">



    <title>Convert TEI to EPUB</title>



    <!-- Bootstrap core CSS -->

    <link href="css/bootstrap.css" rel="stylesheet"/>



	<style type="text/css">

	.activate{

	color: blue;

	cursor: pointer;

	}

	</style>
<style type="text/css">
.column{
float: left;
width: 100px;
}
.cell{
height: 50px;
border: 1px black solid;
overflow: hidden;
padding: 3px;
background-color:white;
}
.selected{
background-color:#666
}
.moving{
background-color:red;
}
	#exportData{
	display:none;
	}
.chapterSelected{
background-color: cyan;
}

#table{
display:none;
}
#syncLevel{
display:none;
}
#chapterLevel{
display:none;
}
#finishRow{
display:none;
}
#addFileBox{
display: none;
}
#actionMenu{
display:none;
}
#downloadZipRow{
display:none;
}
.jcItem {
    /* Required only for block elements like <li>'s */
    float: left;

}
.levelSelected{
font-weight: bold;
}
#syncTableInstructions{
display:none;
}
</style>
  </head>



  <body>







    <div class="container">
      <div class="row">



        <div class="col-lg-12">

		<button id="signin">Sign in</button>

        </div>



      </div>


      <div class="row">



        <div class="col-lg-12">
		  	
          <h1 class="page-header">Convert TEI to EPUB using Google Drive</h1>
        <div id="introInstructions">
          <p>Follow the procedure below to create a synched variorum ePub edition 
             from a set of TEI files.  The resulting epub can be opened in 
             most epub readers, but will benefit from the version syncing capabilities of 
             <em>Libretto</em> (the mobile variorum reader from the 
             New York Public Library for the Performing Arts).
          </p>
          <p>
          <strong>Step one:</strong> First, upload all of the versions of your text as TEI files to 
          a Google Drive folder.  Note that each TEI file should include only 
          ONE version (that is, it should not use the app/rdg tags).  If you 
          have used app/rdg tags, you can generate individual files through an 
          XSL stylesheet that selects only one witness.
          </p>  
          <div class="screenshot">
          <img src="screenshot-uploadXML.jpg" width=500/>
          </div>
          <p>
          To the same directory, upload an XSL stylesheet to transform the TEI to HTML.    
          </p>
          <div class="screenshot">
          <img src="screenshot-uploadXSL.jpg" width=500/>
          </div>
          <br/>
          <p>Now, copy the link to the Google Drive folder:</p>
          <img src="screenshot-GoogleURI.png"/>
         <h2> <p>And paste it in the box below:</p></h2>
       </div>
          <h2><input name="SearchBox" id="SearchBox" type="text" size="20"/> <button id="listFile">Show files</button> 
   		   </h2>

        </div>



      </div>
         



     
	<div class="row" id="addFileBox">
	
 <div class="col-lg-12">
 <span>Select XML files:</span>
 <ul id="XMLFileList">
 
 </ul>

 </div>
 <div class="col-lg-12">
 <span>Select XSL file:</span>
 <ul id="XSLFileList">
 </ul> 
  <button id="loadSelected">Load</button>
  <hr/>

 </div>
 
 </div>
 <div class="row" id="ViewMenu">
  <div id="actionMenu"><span id="syncVersions">Sync versions</span> | <span id="selectChapters">Select Chapters</span> | <span id="finishUp">Complete</span> </div>
 <hr/>
 </div>
 
	<div class="row" id="syncLevel">
	
 <div class="col-lg-12">
<div id="syncTableIntro"><p>You can collate similar moments in different versions of the text using this tool.  
To begin, enter the name of the lowest level tag it makes sense to synchronize (for example:
<strong>sp</strong> or <strong>p</strong>).  You can also enter CSS-style paths (e.g. <strong>div[type=song]</strong>)</p> 
<span>
<label for="tagSync">TAG OR CSS PATH: </label><input id="tagSync" name="tagSync" type="text"/><button id="SyncGo">Sync</button>
</span>
</div>
<div id="syncTableInstructions"><p>Line up similar moments into the same rows.</p>
<ul>
<li>Click  a cell (or cells) to select or unselect</li>
<li>Type "i" to insert an empty (spacing) cell below the selected cell(s)</li>
<li>Type "d" to delete an empty (spacing) cell</li>
<li>Type "m" to "cut" selected cells to move elsewhere (cut cells will turn red)</li>
<li>Once cells are "cut" (and red), click a cell to insert or paste them into a new location</li>
</ul> 
<p>When are are done, click this button: 
  <button id="saveData">Save</button></p>
</div>


 </div>
 <div id="table">
 </div>
  
 </div>

          
 <div class="row" id="chapterLevel">
 <p>You can divide the text into chapters or scenes.  To begin, enter the tag or CSS-style 
 path that indicates a significant division in the text.  For example:
 <strong>div[type=scene]</strong> or <strong>div</strong>.
 You can also select the chapters manually by leaving the text box blank and just clicking <strong>Select</strong></p>
 <div>Enter the tag name </div>
<span>
<label for="breakTag">Tag name</label><input id="breakTag" name="breakTag" type="text"/><button id="treeGo">Select</button>

</span>




        <div class="col-lg-12">

         <button id="exportData">Done</button>
          <div id="trees">
          </div>
    

        </div>



     

 </div>










        <div id="finishRow" class="row">

          <div class="col-lg-12">

         <p>When you are completely finished, click the button below.  A new folder 
         containing all of your epub files will be added to your Google Drive folder you 
         selected at the start.</p>

 <button id="doneButton">Save to drive</button>
          </div>

        </div>


        <div id="downloadZipRow" class="row">
			<p>
          Now you can download your epub file (which is just a zip file containing all 
          of the files you just created).  Google will zip the folder for you, but 
          unfortunately, you'll have to go to the Drive App to do it.  
          So follow this link:
          </p> 
          <span><a id="downloadLink" href="" target="_blank">https://drive.google.com/#folders/</a></span>
          <p>and select all of the files in the folder by clicking the top 
          checkbox:</p> 
          <img src="screenshot-selectedFiles.png"/>
          <p>Then click on the "More" drop-down menu and select &quot;Download&quot;</p>
           <img src="screenshot-DownloadMenu.png"/>
          <p>
          A popup will appear giving you some download options.
          Just click the blue "Download" button.
           
          </p>
 <img src="screenshot-GoogleDownload.png"/>
 <p>After a few seconds, your ebook should download.  Just rename the file with the 
 extension &quot;.epub &quot; and you will have created an epub file that can be 
 read with many readers, including Libretto!</div>
	




      <footer>

      </footer>

      

    </div><!-- /.container -->



    <!-- JavaScript -->

	
    <script src="js/jquery.js"></script>

<script type="text/javascript" src="js/config.js"></script>
<script type="text/javascript" src="js/underscore.js"></script>

<script type="text/javascript" src="js/Saxonce/Saxonce.nocache.js"></script>
<script type="text/javascript" src="js/uuid.js"></script>
<script type="text/javascript" src="js/script.js"></script>
<script src="https://apis.google.com/js/client.js?onload=handleClientLoad"></script>
  </body>



</html>